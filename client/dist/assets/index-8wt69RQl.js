import{r as o,j as e,g as P,a as F}from"./index-CK4vFJw6.js";import{g as O,u as R,r as B}from"./AuthService-D3kEXmEk.js";import{c as V,a as v}from"./dealService-DQR-YRBo.js";import{g as k}from"./companyService-BsFuag96.js";import{N as U,D as z,p as G,c as _}from"./netProfit-DsRGFS4I.js";import{S as Y}from"./index-BASRcFmR.js";import"./index-V6NroyKG.js";import"./iconBase-DkHDt37A.js";function q(i=8){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const t=c.length;for(let s=0;s<i;s++)r+=c.charAt(Math.floor(Math.random()*t));return r}const H=({userId:i})=>{const[c,r]=o.useState([]);return o.useEffect(()=>{(async()=>{const s=await v(i);r(s)})()},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-white h-50",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{className:"thead-dark",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col text-uppercase ",children:" "}),e.jsx("th",{scope:"col text-uppercase ",children:" COMPANY"}),e.jsx("th",{scope:"col text-uppercase ",children:"ASSET CLASS"}),e.jsx("th",{scope:"col text-uppercase ",children:"NET PROFIT(LOSS)"}),e.jsx("th",{scope:"col text-uppercase ",children:"SECTOR"}),e.jsx("th",{scope:"col text-uppercase ",children:"NET MOIC"}),e.jsx("th",{scope:"col text-uppercase ",children:"TOTAL INVESTMENT"}),e.jsx("th",{scope:"col text-uppercase ",children:"NET IRR "}),e.jsx("th",{scope:"col text-uppercase ",children:"NUMBER OF INVESTMENTS "})]})}),e.jsxs("tbody",{children:[c.length==0&&e.jsx("h5",{className:"text-center text-muted",children:"No Any Investment  "}),c.length>0&&(c==null?void 0:c.map((t,s)=>e.jsx(J,{list:c,index:s,companyId:t==null?void 0:t._id,userId:i,deals:t==null?void 0:t.deals})))]})]})})})},J=({companyId:i,list:c,index:r,deals:t,userId:s})=>{var b,g;const[a,d]=o.useState({}),[m,p]=o.useState(!1),[x,h]=o.useState(0),[n,l]=o.useState(0),[j,D]=o.useState(0);return o.useEffect(()=>{(async()=>{var I;const u=await k(i);d(u),l((I=u==null?void 0:u.dealSummary)==null?void 0:I.currentValuation),h(()=>t.reduce((A,f)=>{var T;const N=(T=f==null?void 0:f.investors)==null?void 0:T.find(L=>L.investerId===s);return A+parseInt((N==null?void 0:N.amount)||0)},0));const M=c==null?void 0:c.filter(w=>w._id===i),{totalCurrentValue:S,currentDate:C,investments:E}=G(M,s);S&&C&&E&&D(_(E,C,S))})()},[i,t]),e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"p-3 ",children:[e.jsx("td",{children:e.jsxs("div",{className:" ",style:{width:"50px",aspectRatio:"1/1"},children:["  ",e.jsx("img",{className:"w-100 h-100 rounded-circle",src:Y+(a==null?void 0:a.profile)||(a==null?void 0:a.img),alt:""})]})}),e.jsx("td",{className:"text-capitalize",children:a==null?void 0:a.name}),e.jsx("td",{children:(b=a==null?void 0:a.dealSummary)==null?void 0:b.asset}),e.jsx(U,{deals:t,userId:s,currentValuation:n,sector:(g=a==null?void 0:a.dealSummary)==null?void 0:g.sector}),e.jsx("td",{children:V(x)}),e.jsx("td",{children:j}),e.jsx("td",{className:"d-flex gap-3",children:e.jsxs("button",{onClick:()=>p(!0),className:"btn-red",children:[t&&(t==null?void 0:t.length)," Investments"]})})]},r),m&&e.jsx(z,{userId:s,company:a,deals:t,setIsNew:p})]})},ae=()=>{var h;const i=(h=P())==null?void 0:h.user,{pathname:c,state:r}=F(),t=c.split("/"),[s,a]=o.useState(null),[d,m]=o.useState(!1),p=n=>{const{name:l,value:j}=n.target;a({...s,[l]:j})};o.useEffect(()=>{r&&(async()=>{const l=await O(r);a({...l==null?void 0:l.account,...l==null?void 0:l.personal})})()},[r]);const x=n=>{if(n.preventDefault(),r){R(r,{personal:{...s},account:{...s}}),m(!1);return}const l=q();B({member:{adminId:i==null?void 0:i._id},account:{...s,password:l,cnfPassword:l},personal:{...s}})};return e.jsxs(e.Fragment,{children:[r&&e.jsxs("div",{className:"d-flex my-3 py-3  admin-header justify-content-between align-items-center",children:[e.jsx("h5",{className:"text-capitalize m-0 fw-semibold",children:"Personal Details"}),e.jsx("div",{className:"right-profile  d-flex gap-4",children:!d&&e.jsx("div",{children:e.jsx("button",{onClick:()=>m(!0),className:"btn-red py-2 text-decoration-none",children:"Edit"})})})]}),e.jsxs("form",{action:"",onSubmit:x,children:[e.jsx("div",{className:"bg-white create-mamber",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"row row-cols-3",children:y==null?void 0:y.map((n,l)=>e.jsx("div",{children:e.jsxs("div",{className:"mx-3 mb-3 d-flex flex-column gap-2 field",children:[e.jsx("label",{className:"ms-3",htmlFor:"",children:n==null?void 0:n.label}),e.jsx("input",{type:(n==null?void 0:n.type)==="date"?"date":"text",style:{cursor:r?d?"auto":"not-allowed":"auto"},disabled:r?!d:!1,onChange:p,value:s&&s[n==null?void 0:n.name],name:n==null?void 0:n.name,className:"input-field"})]})},l))})})})}),(d||!r)&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn-red rounded-5 px-4 my-3",children:"Save"})})]}),!(t!=null&&t.includes("personal-add"))&&e.jsxs("div",{className:"h-50",children:[e.jsx("div",{className:"my-3",children:e.jsx("div",{className:"bg-dark py-4 px-5 rounded d-flex justify-content-between",children:e.jsx("h5",{className:"text-white",children:"Investments"})})}),e.jsx(H,{userId:r})]})]})},y=[{place:"Thomas",type:"input",name:"firstName",label:"First name"},{place:"Domingue",type:"input",name:"lastName",label:"Last name"},{place:"thomas.domnugue@gmail.com",type:"input",name:"email",label:" E-mail"},{place:"Paris, France",type:"input",name:"city",label:"City of residence"},{place:" 10-05-1993",type:"date",name:"dob",label:"Date Of birth"},{place:" 07754838908",type:"input",name:"phone",label:"Phone number"},{place:"Blue Nest",type:"input",name:"company",label:"Company name"},{place:" Tech and E-commerce ",type:"input",name:"industry",label:" Industry"}];export{ae as default};
